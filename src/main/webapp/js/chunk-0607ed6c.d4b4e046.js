(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0607ed6c"],{"103b":function(e,t,a){},"109a":function(e,t,a){},"629a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",{staticClass:"main-div"},[a("hr"),a("b-row",{staticClass:"mt-1"},[a("b-col",{attrs:{cols:"10"}},[a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[e._v("Trn. Id:")])]),a("b-col",{staticClass:"col-left",attrs:{cols:"2"}},[e._v(e._s(e.leaveTransaction.trnId))])],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[e._v("Code:")])]),a("b-col",{attrs:{cols:"2"}},[a("b-form-group",[a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("searchSm",{attrs:{column1Key:e.searchEmp.attr1.name,column1label:e.searchEmp.attr1.label,column2Key:e.searchEmp.attr2.name,column2label:e.searchEmp.attr2.label,fetchItem:e.fetchLTEmployee1,items:e.employeeList,totalRowsT:e.totalRows},on:{fetchD:e.fetchEmployeeList}})]},proxy:!0}])},[a("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-right form-control form-control-sm",attrs:{placeholder:"Employee code",title:"Enter employee code"},on:{change:e.getEmployee},model:{value:e.leaveTransaction.empCode,callback:function(t){e.$set(e.leaveTransaction,"empCode",t)},expression:"leaveTransaction.empCode"}})],1)],1)],1),a("b-col",{staticClass:"col-left",attrs:{cols:"5"}},[e._v(e._s(e.leaveTransaction.empName))])],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[e._v("Leave Type:")])]),a("b-form-radio-group",{staticClass:"mb-3",attrs:{options:e.options,"value-field":"item","text-field":"name","disabled-field":"notEnabled"},model:{value:e.selectedLeaveType,callback:function(t){e.selectedLeaveType=t},expression:"selectedLeaveType"}}),a("b-form-checkbox",{attrs:{id:"chkLA"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[e._v(" Leave Adjustment ")])],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[e._v("Nature:")])]),a("b-col",{attrs:{cols:"4"}},[a("b-form-input",{staticClass:"form-control form-control-sm",attrs:{id:"input-id",placeholder:"Nature of leave"},model:{value:e.leaveTransaction.leaveNature,callback:function(t){e.$set(e.leaveTransaction,"leaveNature",t)},expression:"leaveTransaction.leaveNature"}})],1)],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-date"}},[e._v(" From Date:")])]),a("b-col",{attrs:{cols:"2"}},[a("datepicker",{attrs:{placeholder:"Select Date","input-class":"form-control form-control-sm styleLine"},model:{value:e.leaveTransaction.dateFrom,callback:function(t){e.$set(e.leaveTransaction,"dateFrom",t)},expression:"leaveTransaction.dateFrom"}})],1),a("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[a("label",{attrs:{for:"input-date"}},[e._v(" To Date:")])]),a("b-col",{attrs:{cols:"2"}},[a("datepicker",{attrs:{placeholder:"Select Date","input-class":"form-control form-control-sm styleLine"},on:{selected:e.validateDate},model:{value:e.leaveTransaction.dateTo,callback:function(t){e.$set(e.leaveTransaction,"dateTo",t)},expression:"leaveTransaction.dateTo"}})],1)],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"1",offset:"1"}},[a("label",{attrs:{for:"input-remarks"}},[e._v(" Remarks:")])]),a("b-col",{attrs:{cols:"6",offset:"1"}},[a("b-form-textarea",{staticClass:"form-control form-control-sm",attrs:{id:"input-remarks",placeholder:"Remarks",rows:"3","max-rows":"6"},model:{value:e.leaveTransaction.remarks,callback:function(t){e.$set(e.leaveTransaction,"remarks",t)},expression:"leaveTransaction.remarks"}})],1)],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-approvalDate"}},[e._v(" Application Date:")])]),a("b-col",{attrs:{cols:"2"}},[a("datepicker",{attrs:{placeholder:"Select Date","input-class":"form-control form-control-sm styleLine"},model:{value:e.leaveTransaction.applicationDate,callback:function(t){e.$set(e.leaveTransaction,"applicationDate",t)},expression:"leaveTransaction.applicationDate"}})],1),a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"total"}},[e._v("Total days:")])]),a("b-col",{attrs:{cols:"1"}},[a("p",{staticClass:"\n                text-right\n                calculated-value\n                form-control form-control-sm\n                styleLine\n                col-right\n              "},[e._v(" "+e._s(e.total)+" ")])])],1)],1),a("b-col",{attrs:{cols:"2"}},[a("b-row",[a("b-card",{staticClass:"text-center",attrs:{header:"Leave Balance information","header-tag":"header"}},[a("b-card-text",[a("b-row",[a("table",[a("tr",[a("td",[e._v("Annual Leave")]),a("td",[e._v(e._s(this.empLeaveSummary.annualLeave))])]),a("tr",[a("td",[e._v("Sick Leave")]),a("td",[e._v(e._s(this.empLeaveSummary.sickLeave))])]),a("tr",[a("td",[e._v("Casual Leave")]),a("td",[e._v(e._s(this.empLeaveSummary.casualLeave))])])])])],1),a("b-button",{attrs:{href:"#",variant:"secondary"},on:{click:function(t){return e.showDetails(e.empLeaveSummary)}}},[e._v("Show details")])],1)],1)],1)],1),a("hr"),a("b-row",{attrs:{"align-h":"center"}},[a("b-button",{staticClass:"mr-1",attrs:{variant:"dark"},on:{click:function(t){return e.save()}}},[e._v("Submit")]),a("b-button",{staticClass:"mr-1",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.defaultState()}}},[e._v(" Clear ")]),a("b-button",{staticClass:"mr-1",attrs:{variant:"secondary"},on:{click:function(t){e.setLeaveFormDisplay(),e.houseKeeping()}}},[e._v("Close")])],1),a("br")],1),a("b-modal",{ref:"my-modal",attrs:{size:"xl"}},[a("leaveDetail",{attrs:{empId:this.leaveTransaction.empCode}})],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-35 d-inline-block",staticStyle:{width:"100%"}},[a("h2",{staticClass:"page-head"},[e._v("Add Leave")])])}],r=a("fa33"),l=a("2f62"),i=a("c9a3"),c=a("64d3"),n=a("bc3a"),m=a.n(n),d={data(){return{msg:{},empLeaveSummary:{},employeeLeave:{},selectedLeaveType:"SL",date1:new Date,date2:new Date,status:"",nature:"",options:[{item:"SL",name:"Sick Leave"},{item:"AL",name:"Annual Leave"},{item:"OL",name:"Other Leave"}],searchEmp:{attr1:{name:"id",label:"Employee Code"},attr2:{name:"empName",label:"Employee Name"}}}},components:{Datepicker:r["a"],searchSm:i["a"],leaveDetail:c["a"]},computed:{...Object(l["c"])(["leaveTransaction","employeeList","totalRows"]),total:function(){const e=this.leaveTransaction.dateFrom,t=this.leaveTransaction.dateTo;e.setHours(0,0,0,0),t.setHours(0,0,0,0);const a=new Date(e),s=new Date(t),o=s-a;return s-a<0?Math.ceil(o/864e5)-1:0===Math.ceil(o/864e5)?1:Math.ceil(o/864e5)+1}},methods:{...Object(l["b"])(["saveLeaveTransaction","fetchEmployeeList","fetchLTEmployee","defaultStateEmpLeave","setLeaveFormDisplay"]),validateDate(){const e=new Date(this.leaveTransaction.dateTo).getTime(),t=new Date(this.leaveTransaction.dateFrom).getTime();console.log(e),console.log(t),console.log(t>=e)},async fetchLTEmployee1(e){await this.fetchLTEmployee(e),await this.fetchEmployeeLeaveSummary(e)},async getEmployee(){await this.fetchLTEmployee(this.leaveTransaction.empCode),await this.fetchEmployeeLeaveSummary(this.leaveTransaction.empCode),0!==this.message.length&&this.$toasted.show(this.message,{theme:"bubble",position:"top-right",duration:5e3})},calculateDays(){},checkForm:function(e){if(console.log("checking form data"),this.errors=[],this.leaveTransaction.empCode||this.errors.push("Please select employee."),this.leaveTransaction.leaveNature||this.errors.push("Leave Nature required."),this.leaveTransaction.leaveType||this.errors.push("Leave Type Required."),this.leaveTransaction.dateFrom||this.errors.push("Leave date from Required."),this.leaveTransaction.dateTo||this.errors.push("Leave date to Required."),!this.errors.length)return!0;this.errors.unshift("Fields highlighted in yellow are required, please enter following ..")},houseKeeping(){this.errors=[]},async save(){this.leaveTransaction.leaveType=this.selectedLeaveType,this.leaveTransaction.noOfWorkingdays=this.total,this.leaveTransaction.adjLeave=!0===this.status?1:0,!0===this.status&&(this.leaveTransaction.noOfWorkingdays=-1*this.leaveTransaction.noOfWorkingdays),this.checkForm(),this.errors.length?this.$toasted.show(this.errors,{theme:"bubble",position:"top-right",duration:5e3}):(0===this.leaveTransaction.id&&(console.log("saving"),await this.saveLeaveTransaction(this.leaveTransaction),await this.defaultState()),this.$toasted.show(this.message,{theme:"bubble",position:"top-right",duration:5e3})),this.houseKeeping()},defaultState(){this.empLeaveSummary={annualLeave:0,casualLeave:0,id:0,sickLeave:0},this.defaultStateEmpLeave()},async fetchEmployeeLeaveSummary(e){const t="http://localhost:8080/payroll/api/v1/employee/leaveSummary/"+e;await m.a.get(t).then(e=>e).then(e=>{this.empLeaveSummary=e.data,this.msg={}}).catch(e=>{console.log(e.response.data),this.empLeaveSummary={annualLeave:0,casualLeave:0,id:0,sickLeave:0},this.msg=e.response.data.errorMessage})},showDetails(){this.$refs["my-modal"].show()}}},v=d,u=(a("9eb6"),a("2877")),h=Object(u["a"])(v,s,o,!1,null,"2281e36a",null);t["default"]=h.exports},"64d3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-div"},[a("div",{staticClass:"h-35 d-inline-block",staticStyle:{width:"100%"}},[a("h5",{staticClass:"align-left pad-left"},[e._v("Leave History Details : "+e._s(this.empId)+" - "+e._s(this.empName))])]),a("b-row",[a("div",[a("b-container",{attrs:{fluid:""}},[a("b-table",{ref:"selectableTable",staticClass:"table table-bordered table-sm",attrs:{"sticky-header":!0,"selected-variant":"active",items:e.leaveHistoryList,fields:e.fields,"current-page":e.currentPage,filter:e.filter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,hover:!0,selectable:""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell(description)",fn:function(t){return[e._v(" "+e._s(t.item.annualLeave>0||t.item.sickLeave>0||t.item.casualLeave>0?"Earned":"used")+" ")]}},{key:"cell(selected)",fn:function(t){var s=t.rowSelected;return[s?[a("span",{staticClass:"sr-only"},[e._v("Selected")])]:[a("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}}]),model:{value:e.visibleRows,callback:function(t){e.visibleRows=t},expression:"visibleRows"}},[a("template",{staticClass:"row-background",slot:"bottom-row"},[a("td",{staticClass:"col-left"},[a("h4",[a("b-badge",[e._v("Total")])],1)]),a("td"),a("td"),a("td"),a("td",{staticClass:"text-right"},[e._v(e._s(e._f("formatter1")(e.t1.toFixed(3))))])]),a("template",{slot:"bottom-row"},[a("td",{staticClass:"text-right"},[e._v(e._s(e._f("formatter1")(e.t2.toFixed(3))))])]),a("template",{slot:"bottom-row"},[a("td",{staticClass:"text-right"},[e._v(e._s(e._f("formatter1")(e.t3.toFixed(3))))])])],2)],1)],1)])],1)},o=[],r=(a("13d5"),a("2f62")),l=a("c1df"),i=a.n(l),c={props:{empId:{},empName:{}},data(){return{visibleRows:[],currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:null,sortDesc:!1,filter:"",sortDirection:"asc",leaveHistoryList:[],fields:[{key:"id",label:"Transaction Id",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"dateFrom",label:"Leave From Date",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"dateTo",label:"Leave Date to",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"description",label:"Description"},{key:"annualLeave",label:"Annual Leave",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"sickLeave",label:"Sick Leave",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"casualLeave",label:"Other Leave",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"adjLeave",label:"Adjusted Leave",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"}]}},mounted(){this.fetchLeaveHistoryList(this.empId)},components:{},computed:{...Object(r["c"])(["message","employeeList","fetchStartRec","employee","totalRows"]),t1(){return this.visibleRows.reduce((e,t)=>e+parseFloat(t.annualLeave),0)},t2(){return this.visibleRows.reduce((e,t)=>e+parseFloat(t.sickLeave),0)},t3(){return this.visibleRows.reduce((e,t)=>e+parseFloat(t.casualLeave),0)}},filters:{formatter1:function(e){return new Intl.NumberFormat(void 0,{minimumFractionDigits:2}).format(e)}},methods:{...Object(r["b"])(["defaultState"]),fetchLeaveHistoryList(e){const t="http://localhost:8080/payroll/api/v1/employee/leaveTransactionList/"+e;fetch(t).then(e=>e.json()).then(e=>{this.leaveHistoryList=e}).catch(e=>console.error(e))},formatData(e,t){return e?t.includes("date")||t.includes("Date")?(e=e.toString(),i()(String(e)).format("DD-MM-YYYY")):e:""}},watch:{empId:{handler:function(){this.fetchLeaveHistoryList(this.empId)}}}},n=c,m=(a("e909"),a("2877")),d=Object(m["a"])(n,s,o,!1,null,"0cbe17b3",null);t["a"]=d.exports},"9eb6":function(e,t,a){"use strict";a("103b")},e909:function(e,t,a){"use strict";a("109a")}}]);
//# sourceMappingURL=chunk-0607ed6c.d4b4e046.js.map