(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bd1240e"],{"0737":function(t,e,a){},"27bc":function(t,e,a){"use strict";a("0737")},"46ee":function(t,e,a){},"917b":function(t,e,a){},"9b6f":function(t,e,a){"use strict";a("917b")},baea:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-div"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFormLoanTransaction,expression:"showFormLoanTransaction"}],attrs:{id:"showformid"}},[a("loanTransaction")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFormLoanSummaryList,expression:"showFormLoanSummaryList"}],attrs:{id:"showformlistid"}},[a("br"),a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.addLoanTransaction()}}},[t._v(" Add Loan transaction")])],1),a("div",{staticClass:"center"},[a("h5",{staticClass:"center"},[t._v("Loan Summary")])])],1),a("hr"),a("b-col",{attrs:{cols:"11",offset:"1"}},[a("b-row",[a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{cols:"6"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"1","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{cols:"6"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On",description:"Leave all unchecked to filter on all data","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.ariaDescribedby;return[a("b-form-checkbox-group",{staticClass:"mt-1",attrs:{"aria-describedby":o},model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[a("b-form-checkbox",{attrs:{value:"empCode"}},[t._v("Employee Code")]),a("b-form-checkbox",{attrs:{value:"empName"}},[t._v("Employee Name")])],1)]}}]),model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}})],1)],1),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{cols:"5"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"2","label-align-sm":"left","label-size":"sm"}},[a("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.rowTotal,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-col",[a("b-button",{staticClass:"float-right",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(e){return t.refreshData()}}},[t._v(" Refresh ")])],1)],1),a("b-table",{attrs:{striped:"",hover:"",items:t.loanSummaryList,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md","show-empty":"",small:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"table-colgroup",fn:function(e){return t._l(e.fields,(function(t){return a("col",{key:t.key,style:{width:"empName"===t.key?"400px":"150px"}})}))}},{key:"cell(name)",fn:function(e){return[t._v(" "+t._s(e.value.first)+" "+t._s(e.value.last)+" ")]}},{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.showDetails(e.item)}}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" Details ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("ul",t._l(e.item,(function(e,o){return a("li",{key:o},[t._v(" "+t._s(o)+": "+t._s(e)+" ")])})),0)])]}}])})],1)],1)])],1)],1),a("hr"),a("b-modal",{ref:"my-modal",attrs:{size:"xl"}},[a("loanDetail",{attrs:{empId:this.empId}})],1)],1)},s=[],r=a("2f62"),l=a("c1df"),n=a.n(l),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("H4",[t._v("Add Loan")]),a("div",{staticClass:"main-div"},[a("hr"),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[t._v("Trn. Id:")])]),a("b-col",{staticClass:"col-left",attrs:{cols:"2"}},[t._v(t._s(t.employeeLoan.trnId))])],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-code"}},[t._v("Code:")])]),a("b-col",{attrs:{cols:"2"}},[a("b-form-group",[a("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[a("searchSm",{attrs:{column1Key:t.searchEmp.attr1.name,column1label:t.searchEmp.attr1.label,column2Key:t.searchEmp.attr2.name,column2label:t.searchEmp.attr2.label,fetchItem:t.fetchEmployeeCode,items:t.employeeList,reset:t.defaultStateEmpLoan,totalRowsT:t.totalRows},on:{fetchD:t.fetchEmployeeList}})]},proxy:!0}])},[a("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-right form-control form-control-sm",attrs:{placeholder:"Employee code",title:"Enter employee code"},on:{change:t.getEmployee},model:{value:t.employeeLoan.empCode,callback:function(e){t.$set(t.employeeLoan,"empCode",e)},expression:"employeeLoan.empCode"}})],1)],1)],1),a("b-col",{staticClass:"col-left",attrs:{cols:"5"}},[t._v(t._s(t.employeeLoan.empName))])],1),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-drAmount"}},[t._v("Dr. Amount:")])]),a("b-col",{attrs:{cols:"2"}},[[a("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"74",placeholder:"",separator:",",precision:3},model:{value:t.employeeLoan.drAmount,callback:function(e){t.$set(t.employeeLoan,"drAmount",e)},expression:"employeeLoan.drAmount"}})]],2),a("b-col",{attrs:{cols:"2"}},[a("label",{attrs:{for:"input-crAmount"}},[t._v("Cr. Amount:")])]),a("b-col",{attrs:{cols:"2"}},[[a("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"74",placeholder:"",separator:",",precision:3},model:{value:t.employeeLoan.crAmount,callback:function(e){t.$set(t.employeeLoan,"crAmount",e)},expression:"employeeLoan.crAmount"}})]],2)],1),a("b-row",{staticClass:"mt-1"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-description"}},[t._v("Description:")])]),a("b-col",{staticClass:"col-left",attrs:{cols:"6"}},[a("b-form-input",{attrs:{id:"input-description"},model:{value:t.employeeLoan.trnDescription,callback:function(e){t.$set(t.employeeLoan,"trnDescription",e)},expression:"employeeLoan.trnDescription"}})],1)],1),a("b-row",{staticClass:"mt-1"},[a("b-col",{staticClass:"col-left",attrs:{cols:"2",offset:"1"}},[a("label",{attrs:{for:"input-bankCode"}},[t._v("Bank Code:")])]),a("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[a("b-form-input",{attrs:{id:"input-bankCode",placeholder:"bank code"},model:{value:t.employeeLoan.bankCode,callback:function(e){t.$set(t.employeeLoan,"bankCode",e)},expression:"employeeLoan.bankCode"}})],1)],1),a("b-row",{staticClass:"mt-3",attrs:{"align-h":"center"}},[a("b-button",{staticClass:"mr-1",attrs:{variant:"dark"},on:{click:function(e){return t.save()}}},[t._v("Submit")]),a("b-button",{staticClass:"mr-1",attrs:{variant:"outline-secondary"},on:{click:function(e){return t.defaultStateEmpLoan()}}},[t._v(" Clear ")]),a("b-button",{staticClass:"mr-1",attrs:{variant:"secondary"},on:{click:function(e){t.defaultStateEmpLoan(),t.setLoanFormDisplay()}}},[t._v("Close")])],1),a("br")],1),a("hr"),a("div",[a("loanSummary",{on:{calculateAdditionalInstallment:t.getAdditionalInstallment}})],1)],1)},c=[],m=a("bb31"),d=a("c9a3"),u={data(){return{searchEmp:{attr1:{name:"id",label:"Employee Code"},attr2:{name:"empName",label:"Employee Name"}}}},components:{loanSummary:m["default"],searchSm:d["a"]},computed:{...Object(r["c"])(["employeeLoan","employeeList","fetchStartRec","empLoanSummary","totalRows","message"])},methods:{...Object(r["b"])(["saveLoanTransaction","fetchEmployeeList","fetchEmployeeLoan","fetchEmployeeLoanInfo","defaultStateEmpLoan","setLoanFormDisplay"]),async fetchEmployeeCode(t){this.fetchEmployeeLoan(t),this.fetchEmployeeLoanInfo(t)},async getEmployee(){await this.fetchEmployeeCode(this.employeeLoan.empCode)},getAdditionalInstallment:function(t){this.additionalInstallment=t},checkForm:function(){if(this.errors=[],this.employeeLoan.empCode||this.errors.push("Employee Code Required."),!this.employeeLoan.drAmount&!this.employeeLoan.crAmount&&this.errors.push("Debit or Credit Required."),this.employeeLoan.trnDescription||this.errors.push("Description Required."),!this.errors.length)return!0;this.errors.unshift("Fields highlighted in yellow are required, please enter followingmessage ..")},houseKeeping(){this.errors=[]},async save(){this.checkForm(),this.errors.length?this.$toasted.show(this.errors,{theme:"bubble",position:"top-right",duration:5e3}):(this.employeeLoan.trnDate=new Date,this.employeeLoan.additionalInstallment=this.empLoanSummary.additionalInstallment,await this.saveLoanTransaction(this.employeeLoan),this.$toasted.show(this.message,{theme:"bubble",position:"top-right",duration:5e3}),this.closeModal()),this.houseKeeping()},closeModal(){this.defaultStateEmpLoan(),this.$root.$emit("bv::hide::modal","bv-modal-addLoan","#btnShow")},defaultState(){}}},f=u,p=(a("e69e"),a("2877")),b=Object(p["a"])(f,i,c,!1,null,"2057d5a7",null),h=b.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-div"},[t._m(0),a("b-row",[a("div",{staticClass:"center"},[a("b-container",{attrs:{fluid:""}},[a("b-table",{staticClass:"table table-bordered table-sm",attrs:{"sticky-header":!0,"selected-variant":"active",items:t.loanTransactions,fields:t.fields,"current-page":t.currentPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,hover:!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(selected)",fn:function(e){var o=e.rowSelected;return[o?[a("span",{staticClass:"sr-only"},[t._v("Selected")])]:[a("span",{staticClass:"sr-only"},[t._v("Not selected")])]]}}]),model:{value:t.visibleRows,callback:function(e){t.visibleRows=e},expression:"visibleRows"}},[a("template",{staticClass:"row-background",slot:"bottom-row"},[a("td",{staticClass:"col-left"},[a("h4",[a("b-badge",[t._v("Total")])],1)]),a("td"),a("td"),a("td"),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("formatter1")(t.t1.toFixed(3))))])]),a("template",{slot:"bottom-row"},[a("td",{staticClass:"text-right"},[t._v(t._s(t._f("formatter1")(t.t2.toFixed(3))))])]),a("template",{slot:"bottom-row"},[a("td",{staticClass:"text-right"},[t._v(t._s(t._f("formatter1")(t.t3.toFixed(3))))])])],2)],1)],1)])],1)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-35 d-inline-block",staticStyle:{width:"100%"}},[a("h5",{staticClass:"align-left pad-left"},[t._v("Transaction Details")])])}],g=(a("13d5"),{props:{empId:{}},data(){return{visibleRows:[],currentPage:1,perPage:5,totalRows:0,pageOptions:[5,10,15],sortBy:null,sortDesc:!1,filter:"",sortDirection:"asc",loanTransactions:[],fields:[{key:"id",label:"Transaction Id",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"trnDate",label:"Transaction Date",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"trnDescription",label:"Description",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"voucherNo",label:"Voucher No",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"additionalInstallment",label:"Additional Installment",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"drAmount",label:"Loan amount",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"crAmount",label:"Repaid amount",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"}]}},mounted(){this.fetchLoanTransactions(this.empId)},components:{},computed:{...Object(r["c"])(["message","employeeList","fetchStartRec","employee"]),t1(){return this.visibleRows.reduce((t,e)=>t+parseFloat(e.additionalInstallment),0)},t2(){return this.visibleRows.reduce((t,e)=>t+parseFloat(e.drAmount),0)},t3(){return this.visibleRows.reduce((t,e)=>t+parseFloat(e.crAmount),0)}},filters:{formatter1:function(t){return new Intl.NumberFormat(void 0,{minimumFractionDigits:2}).format(t)}},methods:{...Object(r["b"])(["defaultState"]),fetchLoanTransactions(t){const e="http://localhost:8080/payroll/api/v1/employee/loantransactions/"+t;fetch(e).then(t=>t.json()).then(t=>{this.loanTransactions=t,this.totalRows=this.loanTransactions.length}).catch(t=>console.error(t))},formatData(t,e){return t?e.includes("date")||e.includes("Date")?(t=t.toString(),n()(String(t)).format("DD-MM-YYYY")):t:""}},watch:{empId:{handler:function(){this.fetchLoanTransactions(this.empId)}}}}),L=g,D=(a("9b6f"),Object(p["a"])(L,y,v,!1,null,"1cd07709",null)),w=D.exports,C={data(){return{showLoanTransactions:!1,empId:{},visibleRows:[],loanSummaryList:[],rowTotal:0,currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:null,sortDesc:!1,filter:"",filterOn:[],sortDirection:"asc",leaveHistoryList:[],fields:[{key:"id",label:"Code",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"empName",label:"Name",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"lastTransactionDate",label:"Last transaction date",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"totalLoans",label:"Total Loans",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"totalPayment",label:"Total Repaid",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"actions",label:"Actions"}]}},mounted(){this.fetchLoanSummaryList()},components:{loanDetail:w,loanTransaction:h},computed:{...Object(r["c"])(["message","employee","showFormLoanSummaryList","showFormLoanTransaction"]),sortOptions(){return this.fields.filter(t=>t.sortable).map(t=>({text:t.label,value:t.key}))}},filters:{formatter1:function(t){return new Intl.NumberFormat(void 0,{minimumFractionDigits:2}).format(t)}},methods:{...Object(r["b"])(["setLoanFormDisplay","defaultState"]),async fetchLoanSummaryList(){const t="http://localhost:8080/payroll/api/v1/loanSummary";fetch(t).then(t=>t.json()).then(t=>{this.loanSummaryList=t,this.rowTotal=this.loanSummaryList.length,console.log(this.loanSummaryList)}).catch(t=>console.error(t))},refreshData(){alert("refresh data"),this.fetchLoanSummaryList()},formatData(t,e){return t?e.includes("date")||e.includes("Date")?(t=t.toString(),n()(String(t)).format("DD-MM-YYYY")):t:""},onFiltered(t){this.rowTotal=t.length,this.currentPage=1},showDetails(t){this.empId=t.id,this.$refs["my-modal"].show()},addLoanTransaction:function(){this.defaultState(),this.setLoanFormDisplay()}}},k=C,_=(a("27bc"),Object(p["a"])(k,o,s,!1,null,null,null));e["default"]=_.exports},e69e:function(t,e,a){"use strict";a("46ee")}}]);
//# sourceMappingURL=chunk-0bd1240e.609a16d8.js.map