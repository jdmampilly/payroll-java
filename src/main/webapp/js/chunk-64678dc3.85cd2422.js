(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64678dc3"],{"2d59":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[t._v("Month")]),o("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[t._v(" "+t._s(this.employeeMET.monthName)+" ")]),o("b-col",{staticClass:"col-left",attrs:{cols:"1",offset:"1"}},[t._v("Year")]),o("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[t._v(" "+t._s(this.employeeMET.trnYear)+" ")])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[t._v("Employee")]),o("b-col",{attrs:{cols:"1"}},[o("b-form-group",[o("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[o("searchSm",{attrs:{column1Key:t.searchEmp.attr1.name,column1label:t.searchEmp.attr1.label,column2Key:t.searchEmp.attr2.name,column2label:t.searchEmp.attr2.label,fetchItem:t.fetchemployeeMET,items:t.employeeList,reset:t.defaultState,totalRowsT:t.totalRows},on:{fetchD:t.fetchEmployeeList}})]},proxy:!0}])},[o("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-right form-control form-control-sm",attrs:{placeholder:"",title:"Enter employee code"},on:{change:t.getEmployee},model:{value:t.employeeMET.id,callback:function(e){t.$set(t.employeeMET,"id",e)},expression:"employeeMET.id"}})],1)],1)],1),o("b-col",{staticClass:"col-left",attrs:{cols:"1",offset:"1"}},[t._v("Name")]),o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v(" "+t._s(this.employeeMET.empName)+" ")]),o("b-col",{staticClass:"col-left",attrs:{cols:"1"}},[t._v(" Department: ")]),o("b-col",{staticClass:"col-left",attrs:{cols:"4"}},[t._v(" "+t._s(this.employeeMET.departmentName)+" ")])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{attrs:{cols:"6"}},[o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Basic Salary")]),o("b-col",{staticClass:"col-right",attrs:{cols:"2"}},[t._v(" "+t._s(t._f("formatter")(this.employeeMET.basicSalary))+" ")])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Attendance")]),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number",placeholder:""},model:{value:t.employeeMET.attendance,callback:function(e){t.$set(t.employeeMET,"attendance",e)},expression:"employeeMET.attendance"}})],1),o("b-col",{attrs:{cols:"3"}},[o("b-form-text",{staticClass:"col-right form-control form-control-sm"},[t._v(" "+t._s(t.salary)+" ")])],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Ot1")]),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number"},model:{value:t.employeeMET.ot1,callback:function(e){t.$set(t.employeeMET,"ot1",e)},expression:"employeeMET.ot1"}})],1),o("b-col",{attrs:{cols:"3"}},[o("b-form-text",{staticClass:"col-right form-control form-control-sm"},[t._v(" "+t._s(t.ot1Amount)+" ")])],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Ot2")]),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number"},model:{value:t.employeeMET.ot2,callback:function(e){t.$set(t.employeeMET,"ot2",e)},expression:"employeeMET.ot2"}})],1),o("b-col",{attrs:{cols:"3"}},[o("b-form-text",{staticClass:"col-right form-control form-control-sm"},[t._v(" "+t._s(t.ot2Amount)+" ")])],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Night Shift")]),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number"},model:{value:t.employeeMET.nightShift,callback:function(e){t.$set(t.employeeMET,"nightShift",e)},expression:"employeeMET.nightShift"}})],1),o("b-col",{attrs:{cols:"3"}},[o("b-form-text",{staticClass:"col-right form-control form-control-sm"},[t._v(" "+t._s(t.nsAmount)+" ")])],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Rent Allowance")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.rentAllowance,callback:function(e){t.$set(t.employeeMET,"rentAllowance",e)},expression:"employeeMET.rentAllowance"}})],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Travel Allowance")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.travelAllowance,callback:function(e){t.$set(t.employeeMET,"travelAllowance",e)},expression:"employeeMET.travelAllowance"}})],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Special Allowance")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.spageAllowance,callback:function(e){t.$set(t.employeeMET,"spageAllowance",e)},expression:"employeeMET.spageAllowance"}})],1)],1)],1),o("b-col",{attrs:{cols:"6"}},[o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Loan deduction")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.loanDeduction,callback:function(e){t.$set(t.employeeMET,"loanDeduction",e)},expression:"employeeMET.loanDeduction"}})],1),o("b-button",{attrs:{variant:"link",size:"sm"},on:{click:function(e){return t.toggleLoanInfo()}}},[o("i",{staticClass:"fas fa-info"},[t._v("Loan information")])])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Housing Bank loan")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.hBankLoan,callback:function(e){t.$set(t.employeeMET,"hBankLoan",e)},expression:"employeeMET.hBankLoan"}})],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Gosi Amount")]),o("b-col",{attrs:{cols:"3",offset:"2"}},[o("vue-numeric",{staticClass:"form-control form-control-sm styleLine col-right group1-color",staticStyle:{"padding-left":"0px"},attrs:{tabindex:"65",placeholder:"",minus:!0,separator:",",precision:3},model:{value:t.employeeMET.gosiAmount,callback:function(e){t.$set(t.employeeMET,"gosiAmount",e)},expression:"employeeMET.gosiAmount"}})],1)],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Late hours")]),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{staticClass:"col-left form-control form-control-sm",attrs:{placeholder:""},model:{value:t.employeeMET.lateHours,callback:function(e){t.$set(t.employeeMET,"lateHours",e)},expression:"employeeMET.lateHours"}})],1),o("b-col",{attrs:{cols:"3"}},[o("b-form-text",{staticClass:"col-right form-control form-control-sm"},[t._v(" "+t._s(t._f("formatter")(t.lateHoursAmount))+" ")])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoanInfo,expression:"showLoanInfo"}],staticClass:"text-info"},[o("Hr"),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left text-info",attrs:{cols:"3"}},[t._v("Loans Balance")]),o("b-col",{staticClass:"col-right",attrs:{cols:"2"}},[t._v(" "+t._s(t._f("formatter")(t.empLoanSummary.drAmountTotal-t.empLoanSummary.crAmountTotal))+" ")])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Loan Installment")]),o("b-col",{staticClass:"col-right",attrs:{cols:"2"}},[t._v(" "+t._s(t._f("formatter")(t.empLoanSummary.loanInstallment))+" ")])],1),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"3"}},[t._v("Last transaction ")]),o("b-col",{staticClass:"col-right",attrs:{cols:"2"}},[t._v(" "+t._s(t._f("formatDate")(t.empLoanSummary.lastTrnDate))+" ")])],1)],1),o("br"),o("br"),o("br"),o("p",[o("span",{staticClass:"w3-tag"},[o("h6",[t._v("Salary payable: "+t._s(t.netSalary))])])])],1)],1),o("hr"),o("b-row",{staticClass:"mt-1"},[o("b-col",{staticClass:"col-left",attrs:{cols:"6"}},[o("MonthEndTransactionAllowance",{ref:"mtaRef",attrs:{id:this.employeeMET.id,trnYear:this.employeeMET.trnYear,trnMonth:this.employeeMET.trnMonth},on:{allowance:t.getAllowance}})],1),o("b-col",{staticClass:"col-left",attrs:{cols:"6"}},[o("MonthEndTransactionDeduction",{ref:"mtdRef",attrs:{id:this.employeeMET.id,trnYear:this.employeeMET.trnYear,trnMonth:this.employeeMET.trnMonth},on:{deduction:t.getDeduction}})],1)],1),o("hr"),o("b-row",{staticClass:"mt-3",attrs:{"align-h":"center"}},[o("b-button",{staticClass:"mr-1",attrs:{variant:"dark"},on:{click:function(e){return t.submit()}}},[t._v("Submit")]),o("b-button",{staticClass:"mr-1",attrs:{variant:"outline-secondary"},on:{click:function(e){t.clearForm(),t.$refs.mtaRef.RemoveItemRow(),t.$refs.mtdRef.RemoveItemRow()}}},[t._v("Clear")]),o("b-button",{staticClass:"mr-1",attrs:{variant:"secondary"},on:{click:function(e){return t.monthEndTransactionDisplay()}}},[t._v("Close")])],1)],1)},l=[],a=(o("13d5"),o("2f62")),c=o("d85e"),n=o.n(c),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-table",{attrs:{small:!0,items:t.items,fields:t.fields,borderless:!0},scopedSlots:t._u([{key:"cell(description)",fn:function(e){return[o("b-form-input",{staticClass:"col-left form-control form-control-sm",model:{value:e.item.description,callback:function(o){t.$set(e.item,"description",o)},expression:"row.item.description"}})]}},{key:"cell(otherAllowance)",fn:function(e){return[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number"},model:{value:e.item.otherAllowance,callback:function(o){t.$set(e.item,"otherAllowance",o)},expression:"row.item.otherAllowance"}})]}}])},[o("template",{slot:"bottom-row"},[o("td",{staticClass:"row-background form-control form-control-sm"},[o("h6",[t._v("Total")])]),o("td",{staticClass:"col-right row-background"},[t._v(t._s(this.t1.toFixed(3)))])])],2),o("button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return t.AddItemRow()}}},[t._v(" Add Row ")]),o("button",{staticClass:"mr-1",attrs:{variant:"danger"},on:{click:function(e){return t.RemoveItemRow()}}},[t._v(" Remove Row ")])],1)},i=[],m={props:{id:{},trnYear:{},trnMonth:{}},data(){return{items:[{description:"",otherAllowance:0}],metAllowance:[],fields:[{key:"description",label:"Description",class:"text-left"},{key:"otherAllowance",label:"Other Allowance",class:"text-right th.sm"}]}},computed:{t1:function(){return this.items.reduce((function(t,e){return t+Number(e.otherAllowance||0)}),0)}},created(){},mounted(){this.items=this.metAllowance},methods:{...Object(a["b"])(["addRowMetAllowance"]),AddItemRow:function(){alert("add allowance row "),this.items.push({description:"",otherAllowance:0})},RemoveItemRow:function(){this.items=[{}]},async fetchAllowanceList(){console.log("fetchallowance called for id:"+this.id);const t="http://localhost:8080/payroll/api/v1/employee/mea/"+this.id;fetch(t).then(t=>t.json()).then(t=>{this.metAllowance=t}).catch(t=>console.error(t))}},watch:{t1:{handler:function(){this.$emit("allowance",this.items)}},id:{handler:function(){console.log("id changed"),this.fetchAllowanceList(),this.items=this.metAllowance}},items:{handler:function(){for(var t=0;t<this.items.length;t++)this.items[t].id=this.id,this.items[t].trnYear=this.trnYear,this.items[t].trnMonth=this.trnMonth;this.$emit("allowance",this.items)}}}},h=m,u=(o("f465"),o("2877")),p=Object(u["a"])(h,r,i,!1,null,"0c3e54cd",null),f=p.exports,d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-table",{attrs:{small:!0,items:t.items,fields:t.fields,borderless:!0},scopedSlots:t._u([{key:"cell(description)",fn:function(e){return[o("b-form-input",{staticClass:"col-left form-control form-control-sm",model:{value:e.item.description,callback:function(o){t.$set(e.item,"description",o)},expression:"row.item.description"}})]}},{key:"cell(otherDeduction)",fn:function(e){return[o("b-form-input",{staticClass:"col-right form-control form-control-sm",attrs:{type:"number"},model:{value:e.item.otherDeduction,callback:function(o){t.$set(e.item,"otherDeduction",o)},expression:"row.item.otherDeduction"}})]}}])},[o("template",{slot:"bottom-row"},[o("td",{staticClass:"row-background form-control form-control-sm"},[o("h6",[t._v("Total")])]),o("td",{staticClass:"col-right row-background"},[t._v(t._s(this.t1.toFixed(3)))])])],2),o("button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return t.AddItemRow()}}},[t._v(" Add Row ")]),o("button",{staticClass:"mr-1",attrs:{variant:"danger"},on:{click:function(e){return t.RemoveItemRow()}}},[t._v(" Remove Row ")])],1)},b=[],y={props:{id:{},trnYear:{},trnMonth:{}},data(){return{items:[{description:"",otherDeduction:0}],metDeduction:[],fields:[{key:"description",label:"Description",class:"text-left"},{key:"otherDeduction",label:"Other Deduction",class:"text-right th.sm"}]}},computed:{t1:function(){return this.items.reduce((function(t,e){return t+Number(e.otherDeduction||0)}),0)}},created(){},mounted(){this.items=this.metDeduction},methods:{...Object(a["b"])(["addRowMetDeduction"]),AddItemRow:function(){this.items.push({description:"",otherDeduction:0})},RemoveItemRow:function(){this.items=[{}]},async fetchDeductionList(){const t="http://localhost:8080/payroll/api/v1/employee/med/"+this.id;fetch(t).then(t=>t.json()).then(t=>{this.metDeduction=t}).catch(t=>console.error(t))}},watch:{t1:{handler:function(){this.$emit("deduction",this.items)}},id:{handler:function(){console.log("id changed in deduction"),this.fetchDeductionList(),this.items=this.metDeduction}},items:{handler:function(){for(var t=0;t<this.items.length;t++)this.items[t].id=this.id,this.items[t].trnYear=this.trnYear,this.items[t].trnMonth=this.trnMonth;this.$emit("deduction",this.items)}}}},w=y,v=(o("e481"),Object(u["a"])(w,d,b,!1,null,"54aab34a",null)),E=v.exports,T=o("c9a3"),M={props:{setDisplay:{type:Function},currentMonth:{}},data(){return{showLoanInfo:!1,loanDetails:{},loanInfo:!1,loanAmount:0,loanInstallment:0,otRates:{},otherAllowance:0,otherDeduction:0,deductions:[],allowances:[],searchEmp:{attr1:{name:"id",label:"Employee Code"},attr2:{name:"empName",label:"Employee Name"}}}},mounted(){this.loadOTRates()},components:{MonthEndTransactionAllowance:f,MonthEndTransactionDeduction:E,searchSm:T["a"],VueNumeric:n.a},computed:{...Object(a["c"])(["totalRows","employeeMET","showMETform","message","emplist","employeeList","fetchStartRec","empLoanSummary","metAllowance","metDeduction",""]),netSalary(){return(parseFloat(this.salary)+parseFloat(this.ot1Amount)+parseFloat(this.ot2Amount)+parseFloat(this.nsAmount)+parseFloat(this.employeeMET.rentAllowance)+parseFloat(this.employeeMET.travelAllowance)+parseFloat(this.employeeMET.spageAllowance)-parseFloat(this.employeeMET.loanDeduction)-parseFloat(this.employeeMET.hBankLoan)-parseFloat(this.employeeMET.gosiAmount)-parseFloat(this.lateHoursAmount)+parseFloat(this.otherAllowance)-parseFloat(this.otherDeduction)).toFixed(3)},salary:function(){return(parseFloat(this.employeeMET.attendance||0)*parseFloat(this.employeeMET.basicSalary||0)/30).toFixed(3)},ot1Amount:function(){return(parseFloat(this.employeeMET.ot1||0)*parseFloat(this.otRates.otRate1||0)*parseFloat(this.employeeMET.basicSalary)/30/8).toFixed(3)},ot2Amount:function(){return(parseFloat(this.employeeMET.ot2||0)*parseFloat(this.otRates.otRate2||0)*parseFloat(this.employeeMET.basicSalary)/30/8).toFixed(3)},nsAmount:function(){return(parseFloat(this.employeeMET.nightShift||0)*parseFloat(this.otRates.nightShiftAmount||0)).toFixed(3)},lateHoursAmount:function(){return(parseFloat(this.employeeMET.lateHours||0)*parseFloat(this.employeeMET.basicSalary||0)/240).toFixed(3)}},filters:{formatter:function(t){return isNaN(t)?0:new Intl.NumberFormat(void 0,{minimumFractionDigits:3}).format(t)}},methods:{...Object(a["b"])(["METformDisplay","fetchemployeeMET","defaultState","fetchEmployeeList","fetchEmployeeLoanInfo","saveEmployeeMET","monthEndTransactionDisplay"]),toggleLoanInfo(){this.showLoanInfo=!this.showLoanInfo},getAllowance:function(t){this.allowances=t,this.otherAllowance=this.otherAllowanceGTotal()},getDeduction:function(t){this.deductions=t,this.otherDeduction=this.otherDeductionGTotal()},async getEmployee(){await this.fetchemployeeMET(this.employeeMET.id),await this.fetchEmployeeLoanInfo(this.employeeMET.id),console.log("fetch employee"),0!==this.message.length&&this.$toasted.show(this.message,{theme:"bubble",position:"top-right",duration:5e3})},async fetchemployeeMET1(t){await this.fetchemployeeMET(t),await this.fetchEmployeeLoanInfo(t)},submit(){alert("save"),this.employeeMET.otherAllowances=this.allowances,this.employeeMET.otherDeductions=this.deductions,this.employeeMET.otherAllowanceTotal=this.otherAllowanceGTotal(),this.employeeMET.otherDeductionTotal=this.otherDeductionGTotal(),console.log("other allowance total:"+this.employeeMET.otherAllowanceTotal),console.log("other deduction total:"+this.employeeMET.otherDeductionTotal),this.saveEmployeeMET(this.employeeMET)},otherAllowanceGTotal(){return this.allowances.reduce((function(t,e){return t+Number(e.otherAllowance||0)}),0)},otherDeductionGTotal(){return this.deductions.reduce((function(t,e){return t+Number(e.otherDeduction||0)}),0)},clearForm(){this.defaultState()},async loadOTRates(){const t="http://localhost:8080/payroll/api/v1/rates",e=await fetch(t);this.otRates=await e.json()}}},g=M,C=(o("5bcd"),Object(u["a"])(g,s,l,!1,null,"a5cd7500",null));e["default"]=C.exports},"360d":function(t,e,o){},"5bcd":function(t,e,o){"use strict";o("64d31")},"64d31":function(t,e,o){},b499:function(t,e,o){},e481:function(t,e,o){"use strict";o("b499")},f465:function(t,e,o){"use strict";o("360d")}}]);
//# sourceMappingURL=chunk-64678dc3.85cd2422.js.map