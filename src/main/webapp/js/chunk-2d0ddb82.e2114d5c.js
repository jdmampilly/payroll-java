(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddb82"],{"831b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("br"),s("b-col",{attrs:{offset:"2"}},[s("span",[s("h4",[t._v(" Create Bank transfer file ")])])]),s("br"),s("b-row",{staticClass:"mt-1"},[s("b-col",{staticClass:"col-left",attrs:{cols:"1",offset:"2"}},[s("label",{attrs:{for:"input-name"}},[t._v("File name:")])]),s("b-col",{attrs:{cols:"2"}},[s("b-form-input",{staticClass:"form-control form-control-sm",attrs:{id:"input-name",placeholder:"Enter a name for the file"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1)],1),s("b-row",[s("b-col",{attrs:{cols:"2",offset:"2"}},[s("br"),s("b-button",{staticClass:"mr-1",attrs:{variant:"dark"},on:{click:function(e){return e.preventDefault(),t.getBankTransferData()}}},[t._v("Get Data")]),s("b-button",{staticClass:"mr-1",attrs:{variant:"dark"},on:{click:function(e){return e.preventDefault(),t.createFile()}}},[t._v("Create CSV file")])],1)],1),s("br"),s("b-row",{staticClass:"mt-1"},[s("b-col",{staticClass:"col-left",attrs:{cols:"1",offset:"2"}},[s("label",{attrs:{for:"input-name"}},[t._v(" Total Records:")])]),s("b-col",{attrs:{cols:"2"}},[t._v(" "+t._s(this.totalRows)+" ")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isBusy,expression:"isBusy"}]},[[s("div",{staticClass:"text-center text-danger my-2"},[s("b-spinner",{staticClass:"align-middle"}),t._m(0)],1)]],2)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h4",[s("strong",[t._v("Please wait...")])])}],r={data(){return{isBusy:!1,bankTransferData:[],totalRows:0,csv:[],filename:""}},methods:{toggleBusy(){this.isBusy=!this.isBusy},convertToCSV(t){const e=[Object.keys(t[0])].concat(t);return e.map(t=>Object.values(t).toString()).join("\n")},async getBankTransferData(){const t="http://localhost:8080/payroll/api/v1/bankTransfer";fetch(t).then(t=>t.json()).then(t=>{console.log("Output: ",t),this.bankTransferData=t,this.totalRows=this.bankTransferData.length}).catch(t=>console.error(t))},createFile(){this.toggleBusy(),this.csv=this.convertToCSV(this.bankTransferData),this.saveToFile(),this.toggleBusy()},saveToFile(){this.downloadBlob(this.csv,this.filename+".csv","text/csv;charset=utf-8;")},downloadBlob(t,e,s){const a=new Blob([t],{type:s}),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.setAttribute("download",e),r.click()}}},o=r,l=s("2877"),c=Object(l["a"])(o,a,n,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0ddb82.e2114d5c.js.map