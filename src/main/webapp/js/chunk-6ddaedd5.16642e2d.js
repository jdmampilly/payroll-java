(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ddaedd5"],{"0954":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFormSalaryTransaction,expression:"showFormSalaryTransaction"}],attrs:{id:"showformid"}},[e("monthEndTransaction")],1),e("hr"),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFormSalaryTransactionList,expression:"showFormSalaryTransactionList"}],attrs:{id:"showformlistid"}},[e("b-row",[e("b-col",{attrs:{cols:"2"}},[e("b-button",{attrs:{squared:"",variant:"secondary"},on:{click:function(a){return t.addSalaryTransaction()}}},[t._v("Add/View salary")])],1),e("b-col",{staticClass:"my-1",attrs:{cols:"1"}},[t._v(" Division:")]),e("b-col",{staticClass:"my-1",attrs:{cols:"2"}},[e("b-form-select",{attrs:{options:t.divisionData,required:""},model:{value:t.division,callback:function(a){t.division=a},expression:"division"}})],1),e("b-col",{attrs:{cols:"1"}},[t._v(" Department:")]),e("b-col",{attrs:{cols:"2"}},[e("b-form-select",{attrs:{options:t.departmentData,required:""},model:{value:t.department,callback:function(a){t.department=a},expression:"department"}})],1),e("b-col",{attrs:{cols:"1"}},[e("button",{staticClass:"button2",on:{click:function(a){return t.queryTransactionList()}}},[e("i",{staticClass:"fa fa-search"})])]),e("b-col",{attrs:{cols:"2"}},[e("h3",[e("b-badge",{attrs:{variant:"success"}},[t._v(" Salary for: "+t._s(this.activeMonth.monthName)+","+t._s(this.activeMonth.year)+" ")])],1)])],1),e("hr"),e("div",{directives:[{name:"show",rawName:"v-show",value:t.empList,expression:"empList"}],attrs:{id:"empList"}},[e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"8"}},[e("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Filter"}},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter},on:{click:function(a){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Per page"}},[e("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(a){t.perPage=a},expression:"perPage"}})],1)],1)],1),e("b-table",{attrs:{striped:"","head-variant":"light",items:t.salaryTransactions,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter},scopedSlots:t._u([{key:"row-details",fn:function(a){return[e("b-card",[e("ul",t._l(a.item,(function(a,s){return e("li",{key:s},[t._v(" "+t._s(s)+": "+t._s(a)+" ")])})),0)])]}}])},[e("colgroup",[e("col"),e("col")])]),e("hr"),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"6"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1)],1)],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isBusy,expression:"isBusy"}]},[[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),t._m(0)],1)]],2)])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",[e("strong",[t._v("Please wait...")])])}],o=e("2f62"),i=e("c1df"),l=e.n(i),n=e("2d59"),c={props:{setActiveTab:{type:Function}},data(){return{isBusy:!1,showMET:!1,empList:!0,selectMode:"single",division:{},department:{},selected:[],divisionData:[{text:"All",value:0},{text:"Press",value:101},{text:"Publishing",value:102}],departmentData:[{text:"All",value:0}],salaryTransactions:[],totalRows:1,fields:[{key:"selected",label:""},{key:"id",label:"Employee Code",sortable:!0,sortDirection:"desc",class:"text-left",formatter:"formatData"},{key:"empName",label:"Employee Name",sortable:!0,sortDirection:"desc",class:"text-left emp-name",formatter:"formatData"},{key:"basicSalary",label:"Basic Salary",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"otTotal",label:"Overtime",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"rentAllowance",label:"Rent Allowance",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"travelAllowance",label:"Travel Allowance",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"spageAllowance",label:"Special Allowance",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"nShiftAllowance",label:"Night shift allowance",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"otherAllowanceTotal",label:"Other Allowance",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:NaN,label:"OT total",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"subTotal",label:"Sub total",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"loanDeduction",label:"Loan Deduction",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"hbankLoan",label:"Housing Bank Loan",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"gosiAmt",label:"Gosi Amount",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"lateHrs",label:"Late Hours",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"otherDeductionTotal",label:"Other Deduction",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"},{key:"netSalary",label:"Net Salary",sortable:!0,sortDirection:"desc",class:"text-right",formatter:"formatData"}],currentPage:1,perPage:5,pageOptions:[2,5,10,15],filter:null,modalInfo:{title:"",content:""}}},mounted(){this.fetchActiveMonth(),this.isBusy=!this.isBusy;const t=async()=>{var t=await this.fetchSalaryTransactions();return this.isBusy=!this.isBusy,t};t().then(t=>console.log("complete"))},components:{monthEndTransaction:n["default"]},computed:{...Object(o["c"])(["employee","showMETform","employeeList","showFormSalaryTransaction","showFormSalaryTransactionList","activeMonth"])},methods:{...Object(o["b"])(["METformDisplay","fetchemployeeMET","monthEndTransactionDisplay","fetchActiveMonth"]),details(t){console.log("call setDisplay",t.id),this.fetchemployeeMET(t.id),this.$emit("setActiveTab")},addSalaryTransaction(){this.monthEndTransactionDisplay()},fetchSalaryTransactions(){const t="http://localhost:8080/payroll/api/v1/salaryList";fetch(t).then(t=>t.json()).then(t=>{this.salaryTransactions=t,this.totalRows=this.salaryTransactions.length,console.log("Salary transaction list fetched"+this.salaryTransactions.length)}).catch(t=>console.error(t))},queryTransactionList(){const t=`http://localhost:8080/payroll/api/v1/salaryList/${this.division}/${this.department}`;fetch(t).then(t=>t.json()).then(t=>{this.salaryTransactions=t,this.totalRows=this.salaryTransactions.length}).catch(t=>console.error(t))},fetchDepartmentList(){const t="http://localhost:8080/payroll/api/v1/department";fetch(t).then(t=>t.json()).then(t=>{this.departmentData=t,this.totalRows=this.departmentData.length}).catch(t=>console.error(t))},fetchDepartmentListForDivision(t){let a=[];this.departmentData=[{text:"All",value:0}];const e="http://localhost:8080/payroll/api/v1/departmentByDivision/"+t;fetch(e).then(t=>t.json()).then(t=>{a=t,a.forEach(t=>this.departmentData.push({text:t.departmentName,value:t.id})),this.totalRows=a.length}).catch(t=>console.error(t))},formatData(t,a){return a.includes("date")||a.includes("Date")?(t=t.toString(),l()(String(t)).format("DD-MM-YYYY")):"id"===a?t:"empName"===a?t.substring(0,100):isNaN(t)?t:(console.log("format "+a),new Intl.NumberFormat(void 0,{minimumFractionDigits:3}).format(t))}},watch:{division:{handler:function(){this.fetchDepartmentListForDivision(this.division)}}}},m=c,h=(e("4409"),e("2877")),d=Object(h["a"])(m,s,r,!1,null,"65079dd6",null);a["default"]=d.exports},4409:function(t,a,e){"use strict";e("61ac")},"61ac":function(t,a,e){}}]);
//# sourceMappingURL=chunk-6ddaedd5.16642e2d.js.map